SUMMARY="Utility to apply diffs to files"
DESCRIPTION="
Patch takes a patch file containing a difference listing produced by the diff \
program and applies those differences to one or more original files, producing \
patched versions."
HOMEPAGE="http://www.gnu.org/software/patch/"
COPYRIGHT="2012-2015 Free Software Foundation, Inc."
LICENSE="GNU GPL v3"
REVISION="2"
SOURCE_URI="http://ftp.gnu.org/pub/gnu/patch/patch-$portVersion.tar.gz"
CHECKSUM_SHA256="7436f5a19f93c3ca83153ce9c5cbe4847e97c5d956e57a220121e741f6e7968f"
PATCHES="patch-$portVersion.patchset"

ARCHITECTURES="x86_gcc2 x86 x86_64 arm"
if [ "$targetArchitecture" = x86_gcc2 ]; then
SECONDARY_ARCHITECTURES="x86"
fi

PROVIDES="
	patch$secondaryArchSuffix = $portVersion
	cmd:patch = $portVersion
	"
REQUIRES="
	haiku$secondaryArchSuffix
	"
if [ -n "$secondaryArchSuffix" ]; then
CONFLICTS="
	patch
	"
fi

BUILD_REQUIRES="
	haiku${secondaryArchSuffix}_devel
	"
BUILD_PREREQUIRES="
	cmd:awk
	cmd:gcc$secondaryArchSuffix
	cmd:make
	"

TEST_REQUIRES="
	cmd:diff
	cmd:git
	"

BUILD()
{
	runConfigure --omit-dirs binDir ./configure --bindir="$prefix"/bin
	make
}

INSTALL()
{
	make install
	rm "$libDir"/charset.alias
}

TEST()
{
	make check
}
