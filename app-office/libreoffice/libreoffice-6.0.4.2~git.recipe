SUMMARY="A full office productivity suite"
DESCRIPTION="LibreOffice is a powerful office suite – its clean interface and \
feature-rich tools help you unleash your creativity and enhance your \
productivity.
LibreOffice includes several applications that make it the most powerful Free \
and Open Source office suite on the market."
HOMEPAGE="https://www.libreoffice.org/"
COPYRIGHT="2000, 2010 Oracle and/or its affiliates.
	2000, 2010 LibreOffice contributors and/or their affiliates."
LICENSE="MPL v2.0"
REVISION="1"
COMMIT="ff4d75891fb947989d16df58a6b2805f20102fc6"
SOURCE_URI="https://github.com/LibreOffice/core/archive/$COMMIT.tar.gz"
CHECKSUM_SHA256="b6ac86d714490b27617d4a08dc622239bf2795a21a236f16096eaa945f760cbb"
SOURCE_DIR="core-$COMMIT"
PATCHES="libreoffice-$portVersion.patchset"

ARCHITECTURES="!x86_gcc2 ?x86_64"
SECONDARY_ARCHITECTURES="?x86"

PROVIDES="
	libreoffice$secondaryArchSuffix = $portVersion
	cmd:libreoffice$secondaryArchSuffix = $portVersion
	"
REQUIRES="
	haiku$secondaryArchSuffix
	"

PROVIDES_devel="
	libreoffice${secondaryArchSuffix}_devel = $portVersion
	"
REQUIRES_devel="
	"

BUILD_REQUIRES="
	haiku${secondaryArchSuffix}_devel
	glm${secondaryArchSuffix}_devel
	devel:libabw_0.1$secondaryArchSuffix
	devel:libcdr_0.1$secondaryArchSuffix
	devel:libclucene_contribs_lib$secondaryArchSuffix
	devel:libclucene_core$secondaryArchSuffix
	devel:libcmis_0.5$secondaryArchSuffix
	devel:libcppunit$secondaryArchSuffix
	devel:libcurl$secondaryArchSuffix
	devel:libe_book_0.1$secondaryArchSuffix
	devel:libepoxy$secondaryArchSuffix
	devel:libepubgen_0.0$secondaryArchSuffix
	devel:libetonyek_0.1$secondaryArchSuffix
	devel:libexpat$secondaryArchSuffix
	devel:libfreehand_0.1$secondaryArchSuffix
	devel:libglew$secondaryArchSuffix
	devel:libgraphite2$secondaryArchSuffix
	devel:libharfbuzz_icu$secondaryArchSuffix
	devel:libhunspell_1.6$secondaryArchSuffix
	devel:libhyphen$secondaryArchSuffix
	devel:libicuuc$secondaryArchSuffix
	devel:libjpeg$secondaryArchSuffix
	devel:liblangtag$secondaryArchSuffix
	devel:liblcms2$secondaryArchSuffix
	devel:libldap$secondaryArchSuffix
	devel:liblpsolve55$secondaryArchSuffix
	devel:libmspub_0.1$secondaryArchSuffix
	devel:libmwaw_0.3$secondaryArchSuffix
	devel:libneon$secondaryArchSuffix
	devel:libnss3$secondaryArchSuffix
	devel:libodfgen_0.1$secondaryArchSuffix
	devel:liborcus_0.13$secondaryArchSuffix
	devel:libpagemaker_0.0$secondaryArchSuffix
	devel:libpoppler$secondaryArchSuffix
	devel:libqxp_0.0$secondaryArchSuffix
	devel:libraptor2$secondaryArchSuffix
	devel:librdf$secondaryArchSuffix
	devel:librevenge_0.0$secondaryArchSuffix
	devel:libsane$secondaryArchSuffix
	devel:libssl$secondaryArchSuffix
	devel:libstaroffice_0.0$secondaryArchSuffix
	devel:libvisio_0.1$secondaryArchSuffix
	devel:libwpd_0.10$secondaryArchSuffix
	devel:libwpg_0.3$secondaryArchSuffix
	devel:libwps_0.4$secondaryArchSuffix
	devel:libxslt$secondaryArchSuffix
	devel:libz$secondaryArchSuffix
	devel:libzmf_0.0$secondaryArchSuffix
	devel:mdds$secondaryArchSuffix
	"
BUILD_PREREQUIRES="
	cmd:aclocal
	cmd:autoconf
	cmd:bison
	cmd:find
	cmd:flex
	cmd:gcc$secondaryArchSuffix
	cmd:genbrk
	cmd:genccode
	cmd:gencmn
	cmd:git
	cmd:gperf
	cmd:grep
	cmd:ld$secondaryArchSuffix
	cmd:make
	cmd:patch
	cmd:perl
	cmd:pkg_config$secondaryArchSuffix
	cmd:python2.7
	cmd:python3.6
	cmd:which
	cmd:xz
	cmd:zip
	"
BUILD()
{
	# cppunittester crashes a lot on Haiku, see #13159. To workaround this create
	# ~/config/settings/system/debug_server/settings with the following content:

	# executable_actions {
	#	cppunittester kill
	# }

	./autogen.sh --with-distro=LibreOfficeHaiku --enable-qt5
	# --disable-fetch-external

	make $jobArgs build-nocheck -k
}

INSTALL()
{
	make distro-pack-install
}
