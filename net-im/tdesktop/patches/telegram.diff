diff --git a/Telegram/SourceFiles/base/build_config.h b/Telegram/SourceFiles/base/build_config.h
index 17316303..3a93c274 100644
--- a/Telegram/SourceFiles/base/build_config.h
+++ b/Telegram/SourceFiles/base/build_config.h
@@ -30,13 +30,15 @@ Copyright (c) 2014-2017 John Preston, https://desktop.telegram.org
 #define OS_LINUX 1
 #elif defined(_WIN32) // __APPLE__ || __linux__
 #define OS_WIN 1
+#elif defined(__HAIKU__) // __APPLE__ || __linux__
+#define OS_HAIKU 1
 #else // __APPLE__ || __linux__ || _WIN32
 #error Please add support for your platform in base/build_config.h
 #endif // else for __APPLE__ || __linux__ || _WIN32
 
 // For access to standard POSIXish features, use OS_POSIX instead of a
 // more specific macro.
-#if defined(OS_MAC) || defined(OS_LINUX)
+#if defined(OS_MAC) || defined(OS_LINUX) || defined(OS_HAIKU)
 #define OS_POSIX 1
 #endif // OS_MAC || OS_LINUX
 
diff --git a/Telegram/SourceFiles/config.h b/Telegram/SourceFiles/config.h
index 633c4e4a..0d09e7d2 100644
--- a/Telegram/SourceFiles/config.h
+++ b/Telegram/SourceFiles/config.h
@@ -272,6 +272,8 @@ inline const char *cApiDeviceModel() {
 	return "Mac";
 #elif defined Q_OS_LINUX
 	return "PC";
+#elif defined Q_OS_HAIKU
+	return "PC";
 #endif
 }
 inline const char *cApiSystemVersion() {
@@ -281,6 +283,8 @@ inline const char *cApiSystemVersion() {
 	return "OS X";
 #elif defined Q_OS_LINUX
 	return "Linux";
+#elif defined Q_OS_Haiku
+	return "Haiku";
 #endif
 }
 
diff --git a/Telegram/SourceFiles/ui/effects/panel_animation.h b/Telegram/SourceFiles/ui/effects/panel_animation.h
index 2e35ece1..2a879a0d 100644
--- a/Telegram/SourceFiles/ui/effects/panel_animation.h
+++ b/Telegram/SourceFiles/ui/effects/panel_animation.h
@@ -20,7 +20,7 @@ Copyright (c) 2014-2017 John Preston, https://desktop.telegram.org
 */
 #pragma once
 
-#include "styles/style_widgets.h"
+//#include "styles/style_widgets.h"
 
 namespace Ui {
 
diff --git a/Telegram/SourceFiles/ui/emoji_config.h b/Telegram/SourceFiles/ui/emoji_config.h
index d580ba7a..3d844a43 100644
--- a/Telegram/SourceFiles/ui/emoji_config.h
+++ b/Telegram/SourceFiles/ui/emoji_config.h
@@ -21,7 +21,7 @@ Copyright (c) 2014-2017 John Preston, https://desktop.telegram.org
 #pragma once
 
 #include "ui/text/text.h"
-#include "emoji.h"
+//#include "emoji.h"
 
 namespace Ui {
 namespace Emoji {
diff --git a/Telegram/SourceFiles/ui/text/text.h b/Telegram/SourceFiles/ui/text/text.h
index f5bcd66d..272dbc80 100644
--- a/Telegram/SourceFiles/ui/text/text.h
+++ b/Telegram/SourceFiles/ui/text/text.h
@@ -20,7 +20,7 @@ Copyright (c) 2014-2017 John Preston, https://desktop.telegram.org
 */
 #pragma once
 
-#include "private/qfontengine_p.h"
+//#include "private/qfontengine_p.h"
 
 #include "core/click_handler.h"
 #include "ui/text/text_entity.h"
diff --git a/Telegram/SourceFiles/ui/widgets/shadow.h b/Telegram/SourceFiles/ui/widgets/shadow.h
index fcce8cc1..f844881f 100644
--- a/Telegram/SourceFiles/ui/widgets/shadow.h
+++ b/Telegram/SourceFiles/ui/widgets/shadow.h
@@ -17,7 +17,7 @@ Copyright (c) 2014-2017 John Preston, https://desktop.telegram.org
 */
 #pragma once
 
-#include "styles/style_widgets.h"
+//#include "styles/style_widgets.h"
 
 namespace Ui {
 
diff --git a/Telegram/ThirdParty/minizip/ioapi.c b/Telegram/ThirdParty/minizip/ioapi.c
index 7f5c191b..649255c5 100644
--- a/Telegram/ThirdParty/minizip/ioapi.c
+++ b/Telegram/ThirdParty/minizip/ioapi.c
@@ -14,7 +14,7 @@
         #define _CRT_SECURE_NO_WARNINGS
 #endif
 
-#if defined(__APPLE__) || defined(IOAPI_NO_64)
+#if defined(__APPLE__) || defined(IOAPI_NO_64) || defined(__HAIKU__)
 // In darwin and perhaps other BSD variants off_t is a 64 bit value, hence no need for specific 64 bit functions
 #define FOPEN_FUNC(filename, mode) fopen(filename, mode)
 #define FTELLO_FUNC(stream) ftello(stream)

diff --git a/Telegram/gyp/telegram_linux.gypi b/Telegram/gyp/telegram_linux.gypi
index 2c464928..d97715c9 100644
--- a/Telegram/gyp/telegram_linux.gypi
+++ b/Telegram/gyp/telegram_linux.gypi
@@ -74,10 +74,10 @@
 #      '<!(pkg-config 2> /dev/null --libs <@(pkgconfig_libs))',
     ],
     'cflags_cc': [
-      '<!(pkg-config 2> /dev/null --cflags appindicator-0.1)',
-      '<!(pkg-config 2> /dev/null --cflags gtk+-2.0)',
-      '<!(pkg-config 2> /dev/null --cflags glib-2.0)',
-      '<!(pkg-config 2> /dev/null --cflags dee-1.0)',
+#      '<!(pkg-config 2> /dev/null --cflags appindicator-0.1)',
+#      '<!(pkg-config 2> /dev/null --cflags gtk+-2.0)',
+#      '<!(pkg-config 2> /dev/null --cflags glib-2.0)',
+#      '<!(pkg-config 2> /dev/null --cflags dee-1.0)',
     ],
     'configurations': {
       'Release': {
